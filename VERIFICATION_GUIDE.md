# Algorand Daily Lottery - Fairness Verification Guide

## ğŸ” How to Verify Lottery Draws Are Fair

Anyone can independently verify that lottery winners are fairly selected. No trust required!

## Quick Start

### 1. Download the Script

Download `verify_draw.py` from this repository.

### 2. Install Requirements

```bash
pip install requests
```

### 3. Run Verification

```bash
python3 verify_draw.py <cycle_number>
```

**Example:**
```bash
python3 verify_draw.py 7
```

## What Gets Verified

âœ… **Tier 1 Winner** (40% of pot) - Exact entry number match
âœ… **Tier 2 Winners** (20% of pot) - All 5 winning entries
âœ… **Tier 3 Winners** (15% of pot) - All 10 winning entries

## How It Works

### 1. Fetch On-Chain Seed
The script fetches the random seed from the blockchain. This seed is:
- âœ… Generated on-chain by the smart contract
- âœ… Immutable (cannot be changed after draw)
- âœ… Publicly visible on Algorand blockchain
- âœ… Created from unpredictable blockchain data

### 2. Recalculate Winners
The script uses the EXACT same algorithm as the backend:
```python
random = JavaRandom(seed)  # Use on-chain seed
tier1_winner = random.nextInt(total_entries)  # Select winner
```

### 3. Compare Results
If calculated winners match registered winners â†’ **FAIR** âœ…
If they don't match â†’ **SUSPICIOUS** âš ï¸

## Understanding the Output

### âœ… Fair Draw Example:
```
ğŸ¥‡ TIER 1 (40% of pot - 1 winner):
   Calculated: Entry #729
   Registered: Entry #729
   Status:     âœ… MATCH

âœ… âœ… âœ…  DRAW IS FAIR AND VALID  âœ… âœ… âœ…
```

### âŒ Suspicious Draw Example:
```
ğŸ¥‡ TIER 1 (40% of pot - 1 winner):
   Calculated: Entry #729
   Registered: Entry #500
   Status:     âŒ MISMATCH

âš ï¸  VERIFICATION FAILED  âš ï¸
```

## Why This Is Trustless

1. **Seed is on blockchain** - Cannot be faked or changed
2. **Algorithm is deterministic** - Same seed = same winners (always)
3. **Anyone can verify** - No special access needed
4. **Open source** - Audit the verification code yourself

## Key Principle: Deterministic Randomness

The lottery uses **deterministic randomness**:
- Same seed input â†’ Same winner output (every time)
- Run verification 1,000 times â†’ Get identical results
- This makes manipulation detectable immediately

## View On Blockchain

Every draw transaction is public on Algorand:

**Example:** https://allo.info/tx/L4BGKKTSTB3NGZF6WPXIBF2DBTY72X5G3UKOJFCB3H4XROLVYX2Q

You can see:
- The random seed in the transaction logs
- The draw execution timestamp
- All on-chain operations

## FAQ

### Q: Can the admin fake winners?
**A:** No! The seed is generated on-chain. If the admin registered different winners than the seed produces, this verification script would immediately detect it.

### Q: Why do I need to trust the verification script?
**A:** You don't! The script is open source - you can:
1. Read the code yourself
2. Modify it as needed
3. Write your own verification tool
4. The algorithm is simple and documented

### Q: What if the seed itself is manipulated?
**A:** The seed is generated by the smart contract using:
- Block timestamp (unpredictable when drawn)
- Pot total (known, but can't be manipulated)
- Total entries (known)
- Transaction sender (who triggered draw)
- Block round number (unpredictable)

These values are hashed together on-chain. The admin cannot control what the seed will be.

### Q: Can I verify past draws?
**A:** Yes! All seeds are stored on the blockchain forever. You can verify any past cycle at any time.

## Advanced: Verify from Blockchain Directly

For maximum trustlessness, you can:

1. Query the draw transaction directly from Algorand
2. Extract the seed from transaction logs
3. Query all entry purchases for that cycle
4. Run the algorithm yourself
5. Compare with registered winners

The verification script does this for you, but you can do it manually if desired.

## Support

If verification fails for any cycle, please report it immediately:
- ğŸ“§ **Email**: info@algodailylottery.com
- ğŸ¦ **Twitter**: [@algodailylottery](https://twitter.com/algodailylottery)
- ğŸ› **GitHub Issues**: [Open an issue](https://github.com/algodailylottery/algo-daily-lottery-verification-public/issues)

## License

MIT License - Use this script freely to verify fairness.

---

**Remember:** A fair lottery is a verifiable lottery. Don't trust, verify! ğŸ”
